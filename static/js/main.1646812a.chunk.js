(this["webpackJsonpreact-with-firebase"]=this["webpackJsonpreact-with-firebase"]||[]).push([[0],{106:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),s=(a(106),a(28)),o=a(21),l=a(31),u=a(14),j=a(54);a(125),a(107),a(109);j.a.initializeApp({apiKey:"AIzaSyC08-esU5opJSWKjtXw_t0UVSqMdsW582o",authDomain:"react-with-firebase-5c1a1.firebaseapp.com",databaseURL:"https://react-with-firebase-5c1a1-default-rtdb.firebaseio.com",projectId:"react-with-firebase-5c1a1",storageBucket:"react-with-firebase-5c1a1.appspot.com",messagingSenderId:"605147249976",appId:"1:605147249976:web:a58f0fa4a677fce40b55cd",measurementId:"G-6XEVNKHBQ7"});var d=j.a.auth,b=(j.a.firestore(),j.a.database()),m=a(29),p=a.n(m),h=a(44),x=a(173);var O=a(160),f=a(167),g=a(168),v=a(175),y=a(169),w=a(176),k=a(170),S=a(65),C=a(171),W=a(172),D=a(166);function E(e,t){return console.log("\uac00\uc785",e,t),d().createUserWithEmailAndPassword(e,t)}function N(e,t){return d().signInWithEmailAndPassword(e,t)}function T(){var e=new d.GoogleAuthProvider;return d().signInWithPopup(e)}var A=a(164),I=a(165),U=a(163),B=a(158),F=a(159),P=a(4);function L(e){var t=e.children,a=e.window,n=Object(B.a)({target:a?a():void 0});return Object(P.jsx)(F.a,{appear:!1,direction:"down",in:!n,children:t})}function R(e){return Object(P.jsx)(r.a.Fragment,{children:Object(P.jsxs)(O.a,{maxWidth:"sm",children:[Object(P.jsx)(U.a,{}),Object(P.jsx)(L,Object(o.a)(Object(o.a)({},e),{},{children:Object(P.jsx)(A.a,{children:Object(P.jsx)(I.a,{children:Object(P.jsx)("button",{onClick:function(){d().signOut()},children:"\ub85c\uadf8\uc544\uc6c3"})})})})),Object(P.jsx)(I.a,{})]})})}var _=a(70),G=a.n(_),q=a(86),H=a.n(q),M=new G.a.Renderer,V=Object(D.a)((function(e){return{root:{width:"100%",flexDirection:"column",backgroundColor:e.palette.background.paper},lBox:{flexDirection:"row-reverse",display:"flex",textAlign:"right"},rBox:{flexDirection:"row-reverse",display:"flex",textAlign:"right"},appBar:{top:"auto",bottom:0,left:0,width:"100%","& input,& button":{width:"100%",height:"50px"}},inline:{wordBreak:"break-all"}}})),Y=function(e){return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)("span",{dangerouslySetInnerHTML:{__html:H.a.sanitize(G.a.parse(e.desc,{renderer:M}),{ALLOWED_TAGS:["h1","h2","h3","h4","h5","strong","a"],ALLOWED_ATTR:["href","target","title"]})}})})},z=function(){var e=V(),t=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"auto"})},a=Object(n.useState)(""),c=Object(s.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)([]),u=Object(s.a)(l,2),j=u[0],m=u[1],D=function(){var e=Object(h.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),o(""),e.prev=2,e.next=5,n={message:i,timestamp:Date.now(),uid:d().currentUser.uid,name:null===d().currentUser.displayName?d().currentUser.email:d().currentUser.displayName},b.ref("chats").push({message:n.message,timestamp:n.timestamp,uid:n.uid,name:n.name});case 5:t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}var n}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){b.ref("chats").on("value",(function(e){var a=e.val();null!==a&&(Object.keys(a).filter((function(e){return a[e].key=e})),m(Object.values(a))),t()}))}),[]),Object(P.jsxs)(O.a,{maxWidth:"sm",style:{paddingBottom:"60px"},children:[Object(P.jsx)(R,{}),Object(P.jsx)("div",{className:"chat-middle",children:Object(P.jsx)(f.a,{className:e.root,children:j.length>0?j.map((function(t,a){return Object(P.jsx)(g.a,{alignItems:"flex-start",style:{display:"block"},children:Object(P.jsxs)(v.a,{style:{display:"flex",flexDirection:d().currentUser.uid===t.uid?"row":"row-reverse",textAlign:d().currentUser.uid===t.uid?"left":"right"},children:[Object(P.jsx)(y.a,{style:{display:"flex",justifyContent:d().currentUser.uid!==t.uid?"flex-end":"flex-start"},children:Object(P.jsx)(w.a,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"})}),Object(P.jsx)(k.a,{primary:t.name,secondary:Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)(S.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary",children:Object(P.jsx)(Y,{desc:t.message})}),Object(P.jsx)("br",{}),x.a(t.timestamp,"yyyy-MM-dd-HH-mm-ss")]})}),Object(P.jsx)(C.a,{onClick:function(){return e=t.key,void b.ref("chats/".concat(e)).remove();var e},children:"\uc0ad\uc81c"})]})},a)})):Object(P.jsx)("li",{children:"\ub9ac\uc2a4\ud2b8\uac00\uc5c6\uc2b5\ub2c8\ub2e4."})})}),Object(P.jsx)(v.a,{position:"fixed",color:"primary",className:e.appBar,children:Object(P.jsx)(O.a,{maxWidth:"sm",children:Object(P.jsx)("form",{onSubmit:D,children:Object(P.jsxs)(W.a,{container:!0,spacing:1,children:[Object(P.jsx)(W.a,{container:!0,item:!0,xs:10,spacing:0,children:Object(P.jsx)("input",{placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",value:i,onChange:function(e){o(e.target.value)}})}),Object(P.jsx)(W.a,{container:!0,item:!0,xs:2,spacing:0,children:Object(P.jsx)(C.a,{variant:"contained",color:"primary",type:"submit",children:"\uc804\uc1a1"})})]})})})})]})},J=a(174),K=a(62),X=a.n(K);function Q(){return Object(P.jsxs)(S.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(P.jsx)(C.a,{component:l.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var Z=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var $=function(){var e=Z(),t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],j=o[1],d=function(e){var t=e.target.name;"email"===t?c(e.target.value):"password"===t&&j(e.target.value)},b=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===r||""===u){e.next=11;break}return e.prev=2,e.next=5,E(r,u).then((function(e){return console.log(e)}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0),console.log("The email address is already in use by another account."===e.t0.message&&"\uc774\ubbf8 \uc788\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4.");case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsxs)(O.a,{component:"main",maxWidth:"xs",children:[Object(P.jsx)(U.a,{}),Object(P.jsxs)("div",{className:e.paper,children:[Object(P.jsx)(w.a,{className:e.avatar,children:Object(P.jsx)(X.a,{})}),Object(P.jsx)(S.a,{component:"h1",variant:"h5",children:"\ud68c\uc6d0 \uac00\uc785"}),Object(P.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:b,children:[Object(P.jsxs)(W.a,{container:!0,spacing:2,children:[Object(P.jsx)(W.a,{item:!0,xs:12,children:Object(P.jsx)(J.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:r,onChange:d})}),Object(P.jsx)(W.a,{item:!0,xs:12,children:Object(P.jsx)(J.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:d})})]}),Object(P.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"\uac00\uc785\ud558\uae30"}),Object(P.jsx)(W.a,{container:!0,justifyContent:"flex-end",children:Object(P.jsxs)(W.a,{item:!0,children:["\uc774\ubbf8 \ud68c\uc6d0\uc774\uc2e0\uac00? ",Object(P.jsx)(C.a,{component:l.b,to:"/login",children:"\ub85c\uadf8\uc778"})]})})]})]}),Object(P.jsx)(v.a,{mt:5,children:Object(P.jsx)(Q,{})})]})};function ee(){return Object(P.jsxs)(S.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(P.jsx)(C.a,{component:l.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var te=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var ae=function(){var e=te(),t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],j=o[1],d=function(e){var t=e.target.name;"email"===t?c(e.target.value):"password"===t&&j(e.target.value)},b=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===r||""===u){e.next=10;break}return e.prev=2,e.next=5,N(r,u).then((function(e){return console.log(e)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(P.jsxs)(O.a,{component:"main",maxWidth:"xs",children:[Object(P.jsx)(U.a,{}),Object(P.jsxs)("div",{className:e.paper,children:[Object(P.jsx)(w.a,{className:e.avatar,children:Object(P.jsx)(X.a,{})}),Object(P.jsx)(S.a,{component:"h1",variant:"h5",children:"\ub85c\uadf8\uc778"}),Object(P.jsxs)("form",{className:e.form,onSubmit:b,noValidate:!0,children:[Object(P.jsx)(J.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.",name:"email",autoComplete:"email",autoFocus:!0,value:r,onChange:d}),Object(P.jsx)(J.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:d}),Object(P.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(P.jsx)(C.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:m,className:e.submit,children:"\uad6c\uae00 \ub85c\uadf8\uc778"}),Object(P.jsxs)(W.a,{container:!0,children:[Object(P.jsx)(W.a,{item:!0,xs:!0}),Object(P.jsx)(W.a,{item:!0,children:Object(P.jsx)(C.a,{component:l.b,to:"/signup",children:"\ud68c\uc6d0\uac00\uc785"})})]})]})]}),Object(P.jsx)(v.a,{mt:8,children:Object(P.jsx)(ee,{})})]})},ne=a(63);var re=function(e){var t=e.component,a=e.authenticated,n=Object(ne.a)(e,["component","authenticated"]);return Object(P.jsx)(u.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return!1===a?Object(P.jsx)(t,Object(o.a)({},e)):Object(P.jsx)(u.a,{to:"/chat"})}}))};var ce=function(e){var t=e.component,a=e.authenticated,n=Object(ne.a)(e,["component","authenticated"]);return Object(P.jsx)(u.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return!0===a?Object(P.jsx)(t,Object(o.a)({},e)):Object(P.jsx)(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ie={authenticated:!1,loading:!0};function se(e,t){switch(t.type){case"GET_USER":return Object(o.a)(Object(o.a)({},e),{},{authenticated:t.result});default:return e}}var oe=function(){var e=Object(n.useReducer)(se,ie),t=Object(s.a)(e,2),a=t[0],r=t[1],c=a.authenticated;return Object(n.useEffect)((function(){d().onAuthStateChanged((function(e){r(e?{type:"GET_USER",result:!0}:{type:"GET_USER",result:!1})}))}),[]),Object(P.jsx)(l.a,{children:Object(P.jsxs)(u.d,{children:[Object(P.jsx)(ce,{path:"/chat",authenticated:c,component:z}),Object(P.jsx)(re,{path:"/signup",authenticated:c,component:$}),Object(P.jsx)(re,{path:["/","/login"],authenticated:c,component:ae})]})})},le=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,178)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};i.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(oe,{})}),document.getElementById("root")),le()}},[[123,1,2]]]);
//# sourceMappingURL=main.1646812a.chunk.js.map