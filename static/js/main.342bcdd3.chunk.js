(this["webpackJsonpreact-with-firebase"]=this["webpackJsonpreact-with-firebase"]||[]).push([[0],{118:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),s=a(49),o=a(41),u=a(89),l=(a(118),a(28)),d=a(14),j=a(31),b=a(15),m=a(57);a(131),a(119),a(121);m.a.initializeApp({apiKey:"AIzaSyC08-esU5opJSWKjtXw_t0UVSqMdsW582o",authDomain:"react-with-firebase-5c1a1.firebaseapp.com",databaseURL:"https://react-with-firebase-5c1a1-default-rtdb.firebaseio.com",projectId:"react-with-firebase-5c1a1",storageBucket:"react-with-firebase-5c1a1.appspot.com",messagingSenderId:"605147249976",appId:"1:605147249976:web:a58f0fa4a677fce40b55cd",measurementId:"G-6XEVNKHBQ7"});var h=m.a.auth,p=(m.a.firestore(),m.a.database()),O=a(29),x=a.n(O),f=a(46),g=a(181);function v(e,t,a,n){return console.log("\uac00\uc7852",e,t,a),p.ref("users").push({email:e,name:t,password:a,uid:n})}var y=function(e,t,a){var n=[];p.ref("list/".concat(e)).on("value",(function(e){var a=e.val();null!==a&&(Object.keys(a).filter((function(e){return a[e].key=e})),console.log("a",Object.values(a)),n=Object.values(a)),t(n)}))},w=a(168),S=a(175),k=a(176),E=a(183),C=a(177),W=a(184),T=a(178),U=a(69),D=a(180),N=a(179),A=a(174);function _(e,t){return console.log("\uac00\uc785",e,t),h().createUserWithEmailAndPassword(e,t)}function I(e,t){return h().signInWithEmailAndPassword(e,t)}function R(){var e=new h.GoogleAuthProvider;return h().signInWithPopup(e)}var L=a(172),B=a(173),F=a(171),M=a(166),P=a(167),G=a(4);function q(e){var t=e.children,a=e.window,n=Object(M.a)({target:a?a():void 0});return Object(G.jsx)(P.a,{appear:!1,direction:"down",in:!n,children:t})}var H=Object(o.b)((function(e){return{me:e.chats.me,userdata:e.chats.userdata}}),null)((function(e){var t=e.me;return Object(G.jsx)(r.a.Fragment,{children:Object(G.jsxs)(w.a,{maxWidth:"sm",children:[Object(G.jsx)(F.a,{}),Object(G.jsx)(q,Object(d.a)(Object(d.a)({},e),{},{children:Object(G.jsx)(L.a,{children:Object(G.jsxs)(B.a,{children:[Object(G.jsxs)(U.a,{variant:"h6",children:[t.name,"\ub2d8\uc758 \ucc44\ud305\ubc29\uc138\uc0c1"]}),Object(G.jsx)("button",{onClick:function(){h().signOut()},children:"\ub85c\uadf8\uc544\uc6c3"})]})})})),Object(G.jsx)(B.a,{})]})})})),V=a(76),Y=a.n(V),z=a(94),J=a.n(z),K=a(95),X=a.n(K),Q="menu/SETME",Z="menu/SETROOMREDUX",$="menu/SETDATA",ee="menu/SETUSERS",te="menu/SETALLMENU",ae="menu/REMOVE",ne=function(e){return{type:$,new_list:e}},re={me:".",roomnumber:"0",chatdata:[],userdata:[],allmenu:[]};var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(d.a)(Object(d.a)({},e),{},{me:t.new_me});case Z:return Object(d.a)(Object(d.a)({},e),{},{roomnumber:t.new_room});case $:return Object(d.a)(Object(d.a)({},e),{},{chatdata:t.new_list});case ee:return Object(d.a)(Object(d.a)({},e),{},{userdata:t.new_user});case te:return Object(d.a)(Object(d.a)({},e),{},{allmenu:t.new_list});case ae:return Object(d.a)(Object(d.a)({},e),{},{allmenu:e.allmenu.filter((function(e){return e.id!==t.id}))});default:return e}},ie=Object(A.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),se=Object(o.b)((function(e){return{userdata:e.chats.userdata,roomnumber:e.chats.roomnumber}}),(function(e){return{setdata:function(t){e(ne(t))},setroomredux:function(t){e({type:Z,new_room:t})},setusers:function(t){e({type:ee,new_user:t})},setme:function(t){e({type:Q,new_me:t})}}}))((function(e){var t=e.setdata,a=e.setroomredux,r=e.setusers,c=e.userdata,i=e.setme,s=e.roomnumber,o=ie();console.log("userdata",c),Object(n.useEffect)((function(){p.ref("users").on("value",(function(e){var t=e.val();console.log(t),null!==t&&r(Object.values(t))}))}),[]),Object(n.useEffect)((function(){c.length>0&&function(e){var t=e.filter((function(e){return!e.uid.indexOf(h().currentUser.uid)}));console.log(t[0].name),i(t[0])}(c)}),[c]);var u=function(e){!function(e,t){p.ref("list/").on("value",(function(a){var n=Object.keys(a.val());console.log("\uccb4\ud06c1",n),t(e)}))}(e,a),y(e,t)};return Object(G.jsx)(S.a,{className:o.root,children:c.length>0?c.map((function(e,t){return Object(G.jsxs)(k.a,{button:!0,onClick:function(){return u(e.uid)},style:{border:e.uid===s?"1px solid #000":"0"},children:[Object(G.jsx)(C.a,{children:Object(G.jsx)(W.a,{children:Object(G.jsx)(X.a,{})})}),Object(G.jsx)(T.a,{primary:e.name,secondary:e.email})]},t)})):Object(G.jsx)("li",{children:"\ub9ac\uc2a4\ud2b8\uac00\uc5c6\uc2b5\ub2c8\ub2e4."})})})),oe=Object(A.a)((function(e){return{root:{flexGrow:1,paddingTop:"64px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),ue=function(e){var t=e.children,a=oe();return Object(G.jsx)(w.a,{maxWidth:"md",className:a.root,children:Object(G.jsxs)(N.a,{container:!0,spacing:3,children:[Object(G.jsx)(N.a,{item:!0,xs:12,md:4,children:Object(G.jsx)(se,{})}),Object(G.jsx)(N.a,{item:!0,xs:12,md:8,children:t})]})})},le=new Y.a.Renderer,de=Object(A.a)((function(e){return{root:{width:"100%",flexDirection:"column",backgroundColor:e.palette.background.paper},lBox:{flexDirection:"row-reverse",display:"flex",textAlign:"right"},rBox:{flexDirection:"row-reverse",display:"flex",textAlign:"right"},appBar:{top:"auto",bottom:0,left:0,width:"100%","& input,& button":{width:"100%",height:"50px"}},inline:{wordBreak:"break-all"}}})),je=function(e){return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)("span",{dangerouslySetInnerHTML:{__html:J.a.sanitize(Y.a.parse(e.desc,{renderer:le}),{ALLOWED_TAGS:["h1","h2","h3","h4","h5","strong","a"],ALLOWED_ATTR:["href","target","title"]})}})})},be=Object(o.b)((function(e){return{roomnumber:e.chats.roomnumber,chatdata:e.chats.chatdata}}),(function(e){return{setdata:function(t){e(ne(t))}}}))((function(e){var t=e.setdata,a=e.chatdata,c=e.roomnumber,i=de(),s=Object(n.useState)(""),o=Object(l.a)(s,2),u=o[0],d=o[1],j=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(""),e.prev=2,e.next=5,a={message:u,timestamp:Date.now(),uid:h().currentUser.uid,name:null===h().currentUser.displayName?h().currentUser.email:h().currentUser.displayName},n=c,p.ref("list/".concat(n)).push({message:a.message,timestamp:a.timestamp,uid:a.uid,name:a.name});case 5:window.scrollTo({top:document.documentElement.scrollHeight,behavior:"auto"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}var a,n}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){y(c,t)}),[]),Object(G.jsx)(ue,{children:Object(G.jsxs)(w.a,{maxWidth:"sm",style:{paddingBottom:"60px"},children:[Object(G.jsx)(H,{}),Object(G.jsx)("div",{className:"chat-middle",children:Object(G.jsx)(S.a,{className:i.root,children:a.length>0?a.map((function(e,t){return Object(G.jsx)(k.a,{alignItems:"flex-start",style:{display:"block"},children:Object(G.jsxs)(E.a,{style:{display:"flex",flexDirection:h().currentUser.uid===e.uid?"row":"row-reverse",textAlign:h().currentUser.uid===e.uid?"left":"right"},children:[Object(G.jsx)(C.a,{style:{display:"flex",justifyContent:h().currentUser.uid!==e.uid?"flex-end":"flex-start"},children:Object(G.jsx)(W.a,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"})}),Object(G.jsx)(T.a,{primary:e.name,secondary:Object(G.jsxs)(r.a.Fragment,{children:[Object(G.jsx)(U.a,{component:"span",variant:"body2",className:i.inline,color:"textPrimary",children:Object(G.jsx)(je,{desc:e.message})}),Object(G.jsx)("br",{}),g.a(e.timestamp,"yyyy-MM-dd-HH-mm-ss")]})}),Object(G.jsx)(D.a,{style:{display:h().currentUser.uid!==e.uid?"none":"inline-flex"},onClick:function(){return t=c,a=e.key,void p.ref("list/".concat(t,"/").concat(a)).remove();var t,a},children:"\uc0ad\uc81c"})]})},t)})):Object(G.jsx)("li",{children:"\ub9ac\uc2a4\ud2b8\uac00\uc5c6\uc2b5\ub2c8\ub2e4."})})}),Object(G.jsx)(E.a,{position:"fixed",color:"primary",className:i.appBar,children:Object(G.jsx)(w.a,{maxWidth:"sm",children:Object(G.jsx)("form",{onSubmit:j,children:Object(G.jsxs)(N.a,{container:!0,spacing:1,children:[Object(G.jsx)(N.a,{container:!0,item:!0,xs:10,spacing:0,children:Object(G.jsx)("input",{placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",value:u,onChange:function(e){d(e.target.value)}})}),Object(G.jsx)(N.a,{container:!0,item:!0,xs:2,spacing:0,children:Object(G.jsx)(D.a,{variant:"contained",color:"primary",type:"submit",children:"\uc804\uc1a1"})})]})})})})]})})})),me=a(182),he=a(66),pe=a.n(he);function Oe(){return Object(G.jsxs)(U.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(G.jsx)(D.a,{component:j.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var xe=Object(A.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var fe=function(){var e=xe(),t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),o=s[0],u=s[1],d=Object(n.useState)(""),b=Object(l.a)(d,2),m=b[0],p=b[1],O=function(e){var t=e.target.name;"email"===t?c(e.target.value):"name"===t?u(e.target.value):"password"===t&&p(e.target.value)},g=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===r||""===m){e.next=11;break}return e.prev=2,e.next=5,_(r,m).then((function(e){console.log("res",e),v(r,o,m,h().currentUser.uid)}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0),console.log("The email address is already in use by another account."===e.t0.message&&"\uc774\ubbf8 \uc788\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4.");case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(G.jsx)(F.a,{}),Object(G.jsxs)("div",{className:e.paper,children:[Object(G.jsx)(W.a,{className:e.avatar,children:Object(G.jsx)(pe.a,{})}),Object(G.jsx)(U.a,{component:"h1",variant:"h5",children:"\ud68c\uc6d0 \uac00\uc785"}),Object(G.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:g,children:[Object(G.jsxs)(N.a,{container:!0,spacing:2,children:[Object(G.jsx)(N.a,{item:!0,xs:12,children:Object(G.jsx)(me.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:r,onChange:O})}),Object(G.jsx)(N.a,{item:!0,xs:12,children:Object(G.jsx)(me.a,{variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"name",name:"name",autoComplete:"name",value:o,onChange:O})}),Object(G.jsx)(N.a,{item:!0,xs:12,children:Object(G.jsx)(me.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:m,onChange:O})})]}),Object(G.jsx)(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"\uac00\uc785\ud558\uae30"}),Object(G.jsx)(N.a,{container:!0,justifyContent:"flex-end",children:Object(G.jsxs)(N.a,{item:!0,children:["\uc774\ubbf8 \ud68c\uc6d0\uc774\uc2e0\uac00?"," ",Object(G.jsx)(D.a,{component:j.b,to:"/login",children:"\ub85c\uadf8\uc778"})]})})]})]}),Object(G.jsx)(E.a,{mt:5,children:Object(G.jsx)(Oe,{})})]})};function ge(){return Object(G.jsxs)(U.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(G.jsx)(D.a,{component:j.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var ve=Object(A.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var ye=function(){var e=ve(),t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),o=s[0],u=s[1],d=function(e){var t=e.target.name;"email"===t?c(e.target.value):"password"===t&&u(e.target.value)},b=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===r||""===o){e.next=10;break}return e.prev=2,e.next=5,I(r,o).then((function(e){return console.log(e)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(G.jsx)(F.a,{}),Object(G.jsxs)("div",{className:e.paper,children:[Object(G.jsx)(W.a,{className:e.avatar,children:Object(G.jsx)(pe.a,{})}),Object(G.jsx)(U.a,{component:"h1",variant:"h5",children:"\ub85c\uadf8\uc778"}),Object(G.jsxs)("form",{className:e.form,onSubmit:b,noValidate:!0,children:[Object(G.jsx)(me.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.",name:"email",autoComplete:"email",autoFocus:!0,value:r,onChange:d}),Object(G.jsx)(me.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o,onChange:d}),Object(G.jsx)(D.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(G.jsx)(D.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:m,className:e.submit,children:"\uad6c\uae00 \ub85c\uadf8\uc778"}),Object(G.jsxs)(N.a,{container:!0,children:[Object(G.jsx)(N.a,{item:!0,xs:!0}),Object(G.jsx)(N.a,{item:!0,children:Object(G.jsx)(D.a,{component:j.b,to:"/signup",children:"\ud68c\uc6d0\uac00\uc785"})})]})]})]}),Object(G.jsx)(E.a,{mt:8,children:Object(G.jsx)(ge,{})})]})},we=a(67);var Se=function(e){var t=e.component,a=e.authenticated,n=Object(we.a)(e,["component","authenticated"]);return Object(G.jsx)(b.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return!1===a?Object(G.jsx)(t,Object(d.a)({},e)):Object(G.jsx)(b.a,{to:"/chat"})}}))};var ke=function(e){var t=e.component,a=e.authenticated,n=Object(we.a)(e,["component","authenticated"]);return Object(G.jsx)(b.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return!0===a?Object(G.jsx)(t,Object(d.a)({},e)):Object(G.jsx)(b.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ee={authenticated:!1,loading:!0};function Ce(e,t){switch(t.type){case"GET_USER":return Object(d.a)(Object(d.a)({},e),{},{authenticated:t.result});default:return e}}var We=function(){var e=Object(n.useReducer)(Ce,Ee),t=Object(l.a)(e,2),a=t[0],r=t[1],c=a.authenticated;return Object(n.useEffect)((function(){h().onAuthStateChanged((function(e){r(e?{type:"GET_USER",result:!0}:{type:"GET_USER",result:!1})}))}),[]),Object(G.jsx)(j.a,{children:Object(G.jsxs)(b.d,{children:[Object(G.jsx)(ke,{path:"/chat",authenticated:c,component:be}),Object(G.jsx)(Se,{path:"/signup",authenticated:c,component:fe}),Object(G.jsx)(Se,{path:["/","/login"],authenticated:c,component:ye})]})})},Te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,186)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},Ue=Object(s.combineReducers)({chats:ce}),De=a(96),Ne=Object(De.createLogger)(),Ae=Object(s.createStore)(Ue,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(Ne)));i.a.render(Object(G.jsx)(o.a,{store:Ae,children:Object(G.jsx)(We,{})}),document.getElementById("root")),Te()}},[[129,1,2]]]);
//# sourceMappingURL=main.342bcdd3.chunk.js.map