(this["webpackJsonpreact-with-firebase"]=this["webpackJsonpreact-with-firebase"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(13),i=a.n(r),s=(a(89),a(27)),o=a(29),l=a(31),u=a(14),d=a(52);a(107),a(90),a(92);d.a.initializeApp({apiKey:"AIzaSyC08-esU5opJSWKjtXw_t0UVSqMdsW582o",authDomain:"react-with-firebase-5c1a1.firebaseapp.com",databaseURL:"https://react-with-firebase-5c1a1-default-rtdb.firebaseio.com",projectId:"react-with-firebase-5c1a1",storageBucket:"react-with-firebase-5c1a1.appspot.com",messagingSenderId:"605147249976",appId:"1:605147249976:web:a58f0fa4a677fce40b55cd",measurementId:"G-6XEVNKHBQ7"});var j=d.a.auth,b=(d.a.firestore(),d.a.database()),p=a(28),m=a.n(p),h=a(39);function f(e,t){return console.log("\uac00\uc785",e,t),j().createUserWithEmailAndPassword(e,t)}function O(e,t){return j().signInWithEmailAndPassword(e,t)}function x(){var e=new j.GoogleAuthProvider;return j().signInWithPopup(e)}var g=a(5),v=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),i=Object(s.a)(r,2),o=i[0],l=i[1],u=function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,n={message:a,timestamp:Date.now(),uid:j().currentUser.uid},b.ref("chats").push({message:n.message,timestamp:n.timestamp,uid:n.uid});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=function(){var e=[];return b.ref("chats").on("value",(function(t){t.forEach((function(t){e.push(t.val())}))})),e}();l(e)};return Object(n.useEffect)((function(){try{b.ref("chats").on("child_added",d),b.ref("chats").on("child_changed",d)}catch(e){console.log(e)}}),[]),Object(g.jsxs)("div",{className:"chat-container",children:[Object(g.jsx)("div",{className:"chat-top",children:"\ud5e4\ub354"}),Object(g.jsx)("div",{className:"chat-middle",children:o.length>0?o.map((function(e,t){return Object(g.jsxs)("li",{className:"chat-bubble send",style:{display:"flex",flexDirection:"column",alignItems:j().currentUser.uid===e.uid?"flex-start":"flex-end"},children:[Object(g.jsx)("p",{children:e.message}),Object(g.jsx)("span",{children:e.timestamp})]},t)})):Object(g.jsx)("li",{children:"\ub9ac\uc2a4\ud2b8\uac00\uc5c6\uc2b5\ub2c8\ub2e4."})}),Object(g.jsx)("div",{className:"chat-bottom",children:Object(g.jsxs)("form",{onSubmit:u,children:[Object(g.jsx)("input",{placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",value:a,onChange:function(e){c(e.target.value)}}),Object(g.jsx)("button",{type:"submit",children:"\uc804\uc1a1"})]})}),Object(g.jsx)("button",{onClick:function(){j().signOut()},children:"\ub85c\uadf8\uc544\uc6c3"})]})},w=a(143),y=a(142),S=a(138),C=a(140),k=a(139),W=a(141),N=a(59),E=a.n(N),I=a(133),D=a(136),T=a(137);function U(){return Object(g.jsxs)(I.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(g.jsx)(y.a,{component:l.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var P=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var A=function(){var e=P(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1],j=function(e){var t=e.target.name;"email"===t?r(e.target.value):"password"===t&&d(e.target.value)},b=function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===c||""===u){e.next=11;break}return e.prev=2,e.next=5,f(c,u).then((function(e){return console.log(e)}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0),console.log("The email address is already in use by another account."===e.t0.message&&"\uc774\ubbf8 \uc788\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4.");case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(g.jsx)(S.a,{}),Object(g.jsxs)("div",{className:e.paper,children:[Object(g.jsx)(w.a,{className:e.avatar,children:Object(g.jsx)(E.a,{})}),Object(g.jsx)(I.a,{component:"h1",variant:"h5",children:"\ud68c\uc6d0 \uac00\uc785"}),Object(g.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:b,children:[Object(g.jsxs)(k.a,{container:!0,spacing:2,children:[Object(g.jsx)(k.a,{item:!0,xs:12,children:Object(g.jsx)(C.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:c,onChange:j})}),Object(g.jsx)(k.a,{item:!0,xs:12,children:Object(g.jsx)(C.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:j})})]}),Object(g.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"\uac00\uc785\ud558\uae30"}),Object(g.jsx)(k.a,{container:!0,justifyContent:"flex-end",children:Object(g.jsxs)(k.a,{item:!0,children:["\uc774\ubbf8 \ud68c\uc6d0\uc774\uc2e0\uac00? ",Object(g.jsx)(y.a,{component:l.b,to:"/login",children:"\ub85c\uadf8\uc778"})]})})]})]}),Object(g.jsx)(W.a,{mt:5,children:Object(g.jsx)(U,{})})]})};function F(){return Object(g.jsxs)(I.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(g.jsx)(y.a,{component:l.b,to:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var _=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var q=function(){var e=_(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1],j=function(e){var t=e.target.name;"email"===t?r(e.target.value):"password"===t&&d(e.target.value)},b=function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===c||""===u){e.next=10;break}return e.prev=2,e.next=5,O(c,u).then((function(e){return console.log(e)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(g.jsx)(S.a,{}),Object(g.jsxs)("div",{className:e.paper,children:[Object(g.jsx)(w.a,{className:e.avatar,children:Object(g.jsx)(E.a,{})}),Object(g.jsx)(I.a,{component:"h1",variant:"h5",children:"\ub85c\uadf8\uc778"}),Object(g.jsxs)("form",{className:e.form,onSubmit:b,noValidate:!0,children:[Object(g.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694.",name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:j}),Object(g.jsx)(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:j}),Object(g.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(g.jsx)(y.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",onClick:p,className:e.submit,children:"\uad6c\uae00 \ub85c\uadf8\uc778"}),Object(g.jsxs)(k.a,{container:!0,children:[Object(g.jsx)(k.a,{item:!0,xs:!0}),Object(g.jsx)(k.a,{item:!0,children:Object(g.jsx)(y.a,{component:l.b,to:"/signup",children:"\ud68c\uc6d0\uac00\uc785"})})]})]})]}),Object(g.jsx)(W.a,{mt:8,children:Object(g.jsx)(F,{})})]})},G=a(60),R=["component","authenticated"];var B=function(e){var t=e.component,a=e.authenticated,n=Object(G.a)(e,R);return Object(g.jsx)(u.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return!1===a?Object(g.jsx)(t,Object(o.a)({},e)):Object(g.jsx)(u.a,{to:"/chat"})}}))},V=["component","authenticated"];var Y=function(e){var t=e.component,a=e.authenticated,n=Object(G.a)(e,V);return Object(g.jsx)(u.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return!0===a?Object(g.jsx)(t,Object(o.a)({},e)):Object(g.jsx)(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},J={authenticated:!1,loading:!0};function K(e,t){switch(t.type){case"GET_USER":return Object(o.a)(Object(o.a)({},e),{},{authenticated:t.result});default:return e}}var L=function(){var e=Object(n.useReducer)(K,J),t=Object(s.a)(e,2),a=t[0],c=t[1],r=a.authenticated;return Object(n.useEffect)((function(){j().onAuthStateChanged((function(e){c(e?{type:"GET_USER",result:!0}:{type:"GET_USER",result:!1})}))}),[]),Object(g.jsx)(l.a,{children:Object(g.jsxs)(u.d,{children:[Object(g.jsx)(Y,{path:"/chat",authenticated:r,component:v}),Object(g.jsx)(B,{path:"/signup",authenticated:r,component:A}),Object(g.jsx)(B,{path:["/","/login"],authenticated:r,component:q})]})})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,146)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(L,{})}),document.getElementById("root")),z()},89:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.5d51a6ba.chunk.js.map